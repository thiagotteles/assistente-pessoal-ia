# Hist√≥ria 3.3: Feedback Visual e Progresso Cont√≠nuo

## Status
Draft

## Hist√≥ria
**Como um** usu√°rio com TDAH que precisa de refor√ßo positivo constante,
**Eu quero** ver claramente o que est√° acontecendo e meu progresso,
**Para que** eu me sinta motivado e confiante usando o sistema diariamente.

## Crit√©rios de Aceita√ß√£o

### 1. Dashboard Executivo Pessoal Autom√°tico
- Arquivo `üìà MEU-DASHBOARD.md` atualizado automaticamente
- Conte√∫do:
  - Esta Semana: Despejos processados, conversas, notas criadas, todos completados
  - Uso dos Agentes: Tabela com conversas e √∫ltima vez
  - Streak de dias consecutivos com visual
  - Progresso em Projetos
  - √öltimas 5 atividades
  - Achievements desbloqueados
- Performance cr√≠tica:
  - Atualiza√ß√£o incremental (n√£o recalcula tudo)
  - Cache de 1 hora
  - Gera√ß√£o ass√≠ncrona (m√°x 500ms, timeout se > 500ms)
  - Dados pr√©-agregados em `.assistant-core/data/dashboard-cache.yaml`
  - Dashboard gerado em < 100ms (mesmo com 10k+ arquivos)

### 2. Indicadores Visuais nas Conversas com Agentes
- Sauda√ß√£o contextual com mem√≥ria em TODOS os agentes:
  - √öltima conversa (quanto tempo atr√°s)
  - Total de conversas (#¬™ conversa)
  - Streak de dias consecutivos
  - Top 3 contextos relevantes
- Performance:
  - Mem√≥ria carregada de cache YAML (< 10ms)
  - Top 3 contextos via √≠ndice invertido
  - Streak calculado 1x/dia e cacheado
  - Total overhead: < 50ms
- **NOTA**: Implementa√ß√£o foi feita na Story 3.0 AC5. Esta story TESTA o comportamento.

### 3. Progresso Visual de Todos e Metas
- Arquivo `todos/PROGRESSO-VISUAL.md` com barras de progresso
- Conte√∫do:
  - Vis√£o Geral: X/Y completados com barra
  - Por Projeto: Barras individuais + lista de todos
  - Metas de Carreira: Progresso geral + sub-metas
  - Pr√≥ximo passo sugerido
- Performance:
  - Barras de progresso: caracteres Unicode (sem imagens)
  - Atualizado apenas quando todo muda status (event-driven)
  - Cache de 5 minutos

### 4. Sistema de Achievements Gamificado (Leve)
- Arquivo de achievements gerenciado automaticamente
- Achievements simples e motivadores:
  - Primeira Semana (7 dias consecutivos)
  - Em Chamas (streak 7+ dias)
  - Explorador (conversou com 5 agentes)
  - Colecionador (50+ notas)
  - Produtivo (100+ todos)
  - Conversador (50+ conversas)
  - Organizado (20+ despejos)
  - Crescimento (definiu metas)
- Performance:
  - Verifica√ß√£o O(1) via contadores em cache
  - Event-driven (n√£o polling)
  - Notifica√ß√µes n√£o bloqueiam

### 5. Notifica√ß√µes N√£o-Intrusivas
- Mensagens de encorajamento contextuais:
  - Ap√≥s processar despejo com sucesso (streak)
  - Ap√≥s 1 semana sem conversar com agente
  - Ap√≥s completar projeto importante
  - Detec√ß√£o de sobrecarga (muitos todos)
- Performance:
  - Geradas apenas ap√≥s eventos (n√£o polling)
  - M√°ximo 1 notifica√ß√£o por sess√£o
  - Regras simples em cache (< 5ms para avaliar)

## Tarefas / Subtarefas

### Tarefa 1: Implementar Dashboard MEU-DASHBOARD.md (AC: 1)
- [ ] Criar estrutura de cache `.assistant-core/data/dashboard-cache.yaml`
  - [ ] Schema com contadores principais
  - [ ] Timestamp de √∫ltima atualiza√ß√£o
  - [ ] Conversas por agente
  - [ ] Streak de dias
- [ ] Implementar gera√ß√£o de `üìà MEU-DASHBOARD.md`
  - [ ] Se√ß√£o "Esta Semana"
  - [ ] Se√ß√£o "Uso dos Agentes" (tabela)
  - [ ] Se√ß√£o "Streak" com visual
  - [ ] Se√ß√£o "Progresso em Projetos"
  - [ ] Se√ß√£o "√öltimas 5 Atividades"
  - [ ] Se√ß√£o "Achievements Desbloqueados"
- [ ] Implementar atualiza√ß√£o incremental
  - [ ] Conta apenas arquivos novos (desde √∫ltimo sync)
  - [ ] Atualiza cache em vez de recalcular tudo
  - [ ] Gera√ß√£o ass√≠ncrona em background
  - [ ] Timeout 500ms (usa cache antigo se > 500ms)
- [ ] Testar performance < 100ms mesmo com 10k+ arquivos

### Tarefa 2: Testar Sauda√ß√£o Contextual dos Agentes (AC: 2)
- [ ] **NOTA**: Implementa√ß√£o feita na Story 3.0. Aqui apenas testamos.
- [ ] Testar sauda√ß√£o de TODOS os 5 agentes:
  - [ ] Organizador (Sofia)
  - [ ] Secret√°ria
  - [ ] Arquiteto (Marcus)
  - [ ] Psic√≥logo (Dr. Helena)
  - [ ] Mentor (Leonardo)
- [ ] Validar informa√ß√µes exibidas:
  - [ ] √öltima conversa (tempo atr√°s)
  - [ ] Total de conversas
  - [ ] Streak de dias
  - [ ] Top 3 contextos relevantes
- [ ] Validar performance < 50ms overhead

### Tarefa 3: Implementar PROGRESSO-VISUAL.md (AC: 3)
- [ ] Criar `todos/PROGRESSO-VISUAL.md`
  - [ ] Vis√£o Geral com barra Unicode
  - [ ] Por Projeto (barras + listas)
  - [ ] Metas de Carreira (se existirem)
  - [ ] Pr√≥ximo passo sugerido
- [ ] Implementar barras de progresso Unicode
  - [ ] Caracteres ‚ñà e ‚ñë para visual
  - [ ] C√°lculo de porcentagem
- [ ] Atualiza√ß√£o event-driven
  - [ ] Trigger quando todo muda status
  - [ ] N√£o polling cont√≠nuo
  - [ ] Cache de 5 minutos

### Tarefa 4: Implementar Sistema de Achievements (AC: 4)
- [ ] Definir lista de achievements
  - [ ] 8 achievements iniciais (ver AC4)
  - [ ] Crit√©rios claros para cada um
- [ ] Implementar verifica√ß√£o de achievements
  - [ ] Contadores em cache (O(1))
  - [ ] Verifica√ß√£o apenas ap√≥s eventos relevantes
  - [ ] N√£o bloqueia fluxo principal
- [ ] Implementar notifica√ß√£o de desbloqueio
  - [ ] Mensagem simples e motivadora
  - [ ] N√£o intrusiva
- [ ] Integrar com MEU-DASHBOARD.md

### Tarefa 5: Implementar Notifica√ß√µes Contextuais (AC: 5)
- [ ] Criar sistema de regras de notifica√ß√£o
  - [ ] Ap√≥s processamento bem-sucedido (streak)
  - [ ] 1 semana sem conversar com agente
  - [ ] Projeto completado
  - [ ] Detec√ß√£o de sobrecarga (15+ todos)
- [ ] Implementar limite de 1 notifica√ß√£o por sess√£o
- [ ] Mensagens encorajadoras em portugu√™s
- [ ] Performance < 5ms para avaliar regras

### Tarefa 6: Integra√ß√£o com Agentes e Workflows (AC: 1-5)
- [ ] Integrar atualiza√ß√£o de dashboard com:
  - [ ] Processamento de despejo (Organizador)
  - [ ] Conversas com agentes (todos os 5)
  - [ ] Completar todos (Secret√°ria)
  - [ ] Definir metas (Mentor)
- [ ] Atualizar mem√≥ria dos agentes
  - [ ] Incrementar contadores de conversas
  - [ ] Atualizar timestamp √∫ltima conversa
  - [ ] Calcular streak
- [ ] Testar integra√ß√£o end-to-end

### Tarefa 7: Testes de Feedback Visual (Todos ACs)
- [ ] Criar script de teste `tests/test-story-3.3.sh`
- [ ] Testar MEU-DASHBOARD.md
  - [ ] Criado e atualizado automaticamente
  - [ ] Todas as se√ß√µes presentes
  - [ ] Dados corretos
  - [ ] Performance < 100ms
- [ ] Testar sauda√ß√£o contextual
  - [ ] Todos os 5 agentes
  - [ ] Informa√ß√µes corretas
  - [ ] Performance < 50ms
- [ ] Testar PROGRESSO-VISUAL.md
  - [ ] Barras Unicode renderizam
  - [ ] Porcentagens corretas
  - [ ] Atualiza√ß√£o event-driven
- [ ] Testar achievements
  - [ ] Desbloqueio correto
  - [ ] Notifica√ß√µes funcionam
  - [ ] N√£o bloqueia
- [ ] Testar notifica√ß√µes contextuais
  - [ ] Mensagens apropriadas
  - [ ] Limite de 1 por sess√£o
  - [ ] N√£o intrusivas

## Dev Notes

### üéØ Contexto para o Dev

**Objetivo:** Feedback visual constante para motivar usu√°rios com TDAH.

**Princ√≠pios:**
- Refor√ßo positivo constante
- Progresso vis√≠vel e tang√≠vel
- Performance n√£o pode degradar experi√™ncia
- Gamifica√ß√£o leve (achievements)

### üîß IMPORTANTE: Sauda√ß√£o Contextual Implementada na Story 3.0

Sauda√ß√£o contextual dos agentes foi implementada na Story 3.0 AC5. Esta story TESTA o comportamento.

### Estrutura de Arquivos

```
.assistant-core/data/
‚îî‚îÄ‚îÄ dashboard-cache.yaml       # Cache de estat√≠sticas

knowledge-base/
‚îî‚îÄ‚îÄ üìà MEU-DASHBOARD.md         # Dashboard autom√°tico

todos/
‚îî‚îÄ‚îÄ PROGRESSO-VISUAL.md         # Progresso de todos

tests/
‚îî‚îÄ‚îÄ test-story-3.3.sh           # Testes completos
```

### Schema do dashboard-cache.yaml

```yaml
ultima_atualizacao: 2025-10-01T14:32:00Z
despejos_processados: 5
conversas_total: 23
notas_criadas: 18
todos_completados: 12
todos_total: 20
streak_dias: 7

conversas_por_agente:
  organizador: 8
  secretaria: 6
  arquiteto: 5
  psicologo: 3
  mentor: 1

ultima_conversa_por_agente:
  organizador: "2025-10-01T12:30:00Z"
  secretaria: "2025-09-30T14:30:00Z"
  # ...

achievements_desbloqueados:
  - primeira_semana
  - em_chamas
  - explorador
```

### Atualiza√ß√£o Incremental (Pseudoc√≥digo)

```python
def atualizar_dashboard():
    # Cache de 1 hora
    if cache_valido(1_hora):
        return cache

    # Atualiza apenas contadores novos
    novos_despejos = contar_arquivos_desde(ultimo_sync, "despejo/processed/")
    novas_notas = contar_arquivos_desde(ultimo_sync, "knowledge-base/")

    # Atualiza cache
    dashboard_cache.update(novos_despejos, novas_notas)
    salvar_cache()

    # Gera markdown (r√°pido)
    return gerar_markdown(dashboard_cache)
```

### Performance Targets

- **Dashboard gera√ß√£o**: < 100ms (10k+ arquivos)
- **Sauda√ß√£o contextual**: < 50ms overhead
- **Atualiza√ß√£o cache**: Event-driven, n√£o polling
- **Achievements check**: O(1) via cache
- **Notifica√ß√µes**: < 5ms para avaliar

## Testing

**Localiza√ß√£o**: `tests/test-story-3.3.sh`

**Casos de Teste Obrigat√≥rios:**
1. Dashboard criado e atualizado
2. Cache incremental funciona
3. Performance < 100ms
4. Sauda√ß√£o contextual (5 agentes)
5. PROGRESSO-VISUAL.md com barras
6. Achievements desbloqueiam corretamente
7. Notifica√ß√µes contextuais apropriadas
8. Limite 1 notifica√ß√£o por sess√£o
9. Event-driven (n√£o polling)
10. Compatibilidade com Epic 2

## Depend√™ncias

- Story 3.0 (sauda√ß√£o contextual implementada)
- Stories 2.1-2.5 (agentes funcionais)
- Knowledge-Base Manager operacional

## Estimativa

**Complexidade:** M√©dia-Alta (performance cr√≠tica)
**Tempo:** 1-1.5 dias
**Risco:** M√©dio (performance pode degradar se mal implementado)

## Log de Mudan√ßas

| Data | Vers√£o | Descri√ß√£o | Autor |
|------|---------|-----------|-------|
| 2025-10-01 | 1.0 | Story criada com base no Epic 3, Story 3.3 | Bob (Scrum Master) |
